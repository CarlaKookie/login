"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[3429],{9075:(te,M,f)=>{f.d(M,{J:()=>U});const U={FRONT:"front",BACK:"back"}},7464:(te,M,f)=>{f.d(M,{E_:()=>G,F3:()=>H});var g=f(467);typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"&&global;var R=function(n){return n.Unimplemented="UNIMPLEMENTED",n.Unavailable="UNAVAILABLE",n}(R||{});class F extends Error{constructor(e,t,o){super(e),this.message=e,this.code=t,this.data=o}}const z=n=>{var e,t,o,s,r;const d=n.CapacitorCustomPlatform||null,a=n.Capacitor||{},b=a.Plugins=a.Plugins||{},u=n.CapacitorPlatforms,$=(null===(e=null==u?void 0:u.currentPlatform)||void 0===e?void 0:e.getPlatform)||(()=>null!==d?d.name:(n=>{var e,t;return null!=n&&n.androidBridge?"android":null!==(t=null===(e=null==n?void 0:n.webkit)||void 0===e?void 0:e.messageHandlers)&&void 0!==t&&t.bridge?"ios":"web"})(n)),de=(null===(t=null==u?void 0:u.currentPlatform)||void 0===t?void 0:t.isNativePlatform)||(()=>"web"!==$()),fe=(null===(o=null==u?void 0:u.currentPlatform)||void 0===o?void 0:o.isPluginAvailable)||(h=>{const p=Z.get(h);return!!(null!=p&&p.platforms.has($())||se(h))}),se=(null===(s=null==u?void 0:u.currentPlatform)||void 0===s?void 0:s.getPluginHeader)||(h=>{var p;return null===(p=a.PluginHeaders)||void 0===p?void 0:p.find(W=>W.name===h)}),Z=new Map,pe=(null===(r=null==u?void 0:u.currentPlatform)||void 0===r?void 0:r.registerPlugin)||((h,p={})=>{const W=Z.get(h);if(W)return console.warn(`Capacitor plugin "${h}" already registered. Cannot register plugins twice.`),W.proxy;const S=$(),B=se(h);let D;const Pe=function(){var P=(0,g.A)(function*(){return!D&&S in p?D=D="function"==typeof p[S]?yield p[S]():p[S]:null!==d&&!D&&"web"in p&&(D=D="function"==typeof p.web?yield p.web():p.web),D});return function(){return P.apply(this,arguments)}}(),q=P=>{let y;const x=(...L)=>{const I=Pe().then(E=>{const k=((P,y)=>{var x,L;if(!B){if(P)return null===(L=P[y])||void 0===L?void 0:L.bind(P);throw new F(`"${h}" plugin is not implemented on ${S}`,R.Unimplemented)}{const I=null==B?void 0:B.methods.find(E=>y===E.name);if(I)return"promise"===I.rtype?E=>a.nativePromise(h,y.toString(),E):(E,k)=>a.nativeCallback(h,y.toString(),E,k);if(P)return null===(x=P[y])||void 0===x?void 0:x.bind(P)}})(E,P);if(k){const N=k(...L);return y=null==N?void 0:N.remove,N}throw new F(`"${h}.${P}()" is not implemented on ${S}`,R.Unimplemented)});return"addListener"===P&&(I.remove=(0,g.A)(function*(){return y()})),I};return x.toString=()=>`${P.toString()}() { [capacitor code] }`,Object.defineProperty(x,"name",{value:P,writable:!1,configurable:!1}),x},ae=q("addListener"),ce=q("removeListener"),ye=(P,y)=>{const x=ae({eventName:P},y),L=function(){var E=(0,g.A)(function*(){const k=yield x;ce({eventName:P,callbackId:k},y)});return function(){return E.apply(this,arguments)}}(),I=new Promise(E=>x.then(()=>E({remove:L})));return I.remove=(0,g.A)(function*(){console.warn("Using addListener() without 'await' is deprecated."),yield L()}),I},ee=new Proxy({},{get(P,y){switch(y){case"$$typeof":return;case"toJSON":return()=>({});case"addListener":return B?ye:ae;case"removeListener":return ce;default:return q(y)}}});return b[h]=ee,Z.set(h,{name:h,proxy:ee,platforms:new Set([...Object.keys(p),...B?[S]:[]])}),ee});return a.convertFileSrc||(a.convertFileSrc=h=>h),a.getPlatform=$,a.handleError=h=>n.console.error(h),a.isNativePlatform=de,a.isPluginAvailable=fe,a.pluginMethodNoop=(h,p,W)=>Promise.reject(`${W} does not have an implementation of "${p}".`),a.registerPlugin=pe,a.Exception=F,a.DEBUG=!!a.DEBUG,a.isLoggingEnabled=!!a.isLoggingEnabled,a.platform=a.getPlatform(),a.isNative=a.isNativePlatform(),a},_=(n=>n.Capacitor=z(n))(typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{}),H=_.registerPlugin;class G{constructor(e){this.listeners={},this.retainedEventArguments={},this.windowListeners={},e&&(console.warn(`Capacitor WebPlugin "${e.name}" config object was deprecated in v3 and will be removed in v4.`),this.config=e)}addListener(e,t){var o=this;let s=!1;this.listeners[e]||(this.listeners[e]=[],s=!0),this.listeners[e].push(t);const d=this.windowListeners[e];d&&!d.registered&&this.addWindowListener(d),s&&this.sendRetainedArgumentsForEvent(e);const a=function(){var u=(0,g.A)(function*(){return o.removeListener(e,t)});return function(){return u.apply(this,arguments)}}();return Promise.resolve({remove:a})}removeAllListeners(){var e=this;return(0,g.A)(function*(){e.listeners={};for(const t in e.windowListeners)e.removeWindowListener(e.windowListeners[t]);e.windowListeners={}})()}notifyListeners(e,t,o){const s=this.listeners[e];if(s)s.forEach(r=>r(t));else if(o){let r=this.retainedEventArguments[e];r||(r=[]),r.push(t),this.retainedEventArguments[e]=r}}hasListeners(e){return!!this.listeners[e].length}registerWindowListener(e,t){this.windowListeners[t]={registered:!1,windowEventName:e,pluginEventName:t,handler:o=>{this.notifyListeners(t,o)}}}unimplemented(e="not implemented"){return new _.Exception(e,R.Unimplemented)}unavailable(e="not available"){return new _.Exception(e,R.Unavailable)}removeListener(e,t){var o=this;return(0,g.A)(function*(){const s=o.listeners[e];if(!s)return;const r=s.indexOf(t);o.listeners[e].splice(r,1),o.listeners[e].length||o.removeWindowListener(o.windowListeners[e])})()}addWindowListener(e){window.addEventListener(e.windowEventName,e.handler),e.registered=!0}removeWindowListener(e){e&&(window.removeEventListener(e.windowEventName,e.handler),e.registered=!1)}sendRetainedArgumentsForEvent(e){const t=this.retainedEventArguments[e];t&&(delete this.retainedEventArguments[e],t.forEach(o=>{this.notifyListeners(e,o)}))}}const c=n=>encodeURIComponent(n).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape),C=n=>n.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent);class A extends G{getCookies(){return(0,g.A)(function*(){const e=document.cookie,t={};return e.split(";").forEach(o=>{if(o.length<=0)return;let[s,r]=o.replace(/=/,"CAP_COOKIE").split("CAP_COOKIE");s=C(s).trim(),r=C(r).trim(),t[s]=r}),t})()}setCookie(e){return(0,g.A)(function*(){try{const t=c(e.key),o=c(e.value),s=`; expires=${(e.expires||"").replace("expires=","")}`,r=(e.path||"/").replace("path=",""),d=null!=e.url&&e.url.length>0?`domain=${e.url}`:"";document.cookie=`${t}=${o||""}${s}; path=${r}; ${d};`}catch(t){return Promise.reject(t)}})()}deleteCookie(e){return(0,g.A)(function*(){try{document.cookie=`${e.key}=; Max-Age=0`}catch(t){return Promise.reject(t)}})()}clearCookies(){return(0,g.A)(function*(){try{const e=document.cookie.split(";")||[];for(const t of e)document.cookie=t.replace(/^ +/,"").replace(/=.*/,`=;expires=${(new Date).toUTCString()};path=/`)}catch(e){return Promise.reject(e)}})()}clearAllCookies(){var e=this;return(0,g.A)(function*(){try{yield e.clearCookies()}catch(t){return Promise.reject(t)}})()}}H("CapacitorCookies",{web:()=>new A});const m=function(){var n=(0,g.A)(function*(e){return new Promise((t,o)=>{const s=new FileReader;s.onload=()=>{const r=s.result;t(r.indexOf(",")>=0?r.split(",")[1]:r)},s.onerror=r=>o(r),s.readAsDataURL(e)})});return function(t){return n.apply(this,arguments)}}();class Q extends G{request(e){return(0,g.A)(function*(){const t=((n,e={})=>{const t=Object.assign({method:n.method||"GET",headers:n.headers},e),s=((n={})=>{const e=Object.keys(n);return Object.keys(n).map(s=>s.toLocaleLowerCase()).reduce((s,r,d)=>(s[r]=n[e[d]],s),{})})(n.headers)["content-type"]||"";if("string"==typeof n.data)t.body=n.data;else if(s.includes("application/x-www-form-urlencoded")){const r=new URLSearchParams;for(const[d,a]of Object.entries(n.data||{}))r.set(d,a);t.body=r.toString()}else if(s.includes("multipart/form-data")||n.data instanceof FormData){const r=new FormData;if(n.data instanceof FormData)n.data.forEach((a,b)=>{r.append(b,a)});else for(const a of Object.keys(n.data))r.append(a,n.data[a]);t.body=r;const d=new Headers(t.headers);d.delete("content-type"),t.headers=d}else(s.includes("application/json")||"object"==typeof n.data)&&(t.body=JSON.stringify(n.data));return t})(e,e.webFetchExtra),o=((n,e=!0)=>n?Object.entries(n).reduce((o,s)=>{const[r,d]=s;let a,b;return Array.isArray(d)?(b="",d.forEach(u=>{a=e?encodeURIComponent(u):u,b+=`${r}=${a}&`}),b.slice(0,-1)):(a=e?encodeURIComponent(d):d,b=`${r}=${a}`),`${o}&${b}`},"").substr(1):null)(e.params,e.shouldEncodeUrlParams),s=o?`${e.url}?${o}`:e.url,r=yield fetch(s,t),d=r.headers.get("content-type")||"";let b,u,{responseType:a="text"}=r.ok?e:{};switch(d.includes("application/json")&&(a="json"),a){case"arraybuffer":case"blob":u=yield r.blob(),b=yield m(u);break;case"json":b=yield r.json();break;default:b=yield r.text()}const X={};return r.headers.forEach(($,Y)=>{X[Y]=$}),{data:b,headers:X,status:r.status,url:r.url}})()}get(e){var t=this;return(0,g.A)(function*(){return t.request(Object.assign(Object.assign({},e),{method:"GET"}))})()}post(e){var t=this;return(0,g.A)(function*(){return t.request(Object.assign(Object.assign({},e),{method:"POST"}))})()}put(e){var t=this;return(0,g.A)(function*(){return t.request(Object.assign(Object.assign({},e),{method:"PUT"}))})()}patch(e){var t=this;return(0,g.A)(function*(){return t.request(Object.assign(Object.assign({},e),{method:"PATCH"}))})()}delete(e){var t=this;return(0,g.A)(function*(){return t.request(Object.assign(Object.assign({},e),{method:"DELETE"}))})()}}H("CapacitorHttp",{web:()=>new Q})},3429:(te,M,f)=>{f.r(M),f.d(M,{InicioPageModule:()=>ie});var g=f(177),K=f(4341),U=f(791),j=f(8986),ne=f(6261),T=f(467),V=f(7464);f(9075);const F=(0,V.F3)("BarcodeScanner",{web:()=>f.e(4651).then(f.bind(f,4651)).then(c=>new c.BarcodeScannerWeb)});var l=f(3953),z=f(671),re=f(369),_=f(1626);let H=(()=>{var c;class C{constructor(i){this.http=i,this.apiUrl="http://localhost:3000/api/mark-attendance"}sendUserData(i){return i.date&&(i.date=new Date(i.date).toISOString().split("T")[0]),this.http.post(this.apiUrl,i)}}return(c=C).\u0275fac=function(i){return new(i||c)(l.KVO(_.Qq))},c.\u0275prov=l.jDH({token:c,factory:c.\u0275fac,providedIn:"root"}),C})();const oe=[{path:"",component:(()=>{var c;class C{constructor(i,m,v,w,O){this.router=i,this.authService=m,this.storage=v,this.userDataService=w,this.alertController=O,this.nombreUsuario=""}ngOnInit(){var i=this;return(0,T.A)(function*(){yield i.storage.create();const m=yield i.storage.get("nombre");i.nombreUsuario=m||"Usuario",console.log("Nombre recuperado desde el storage:",i.nombreUsuario)})()}logout(){var i=this;return(0,T.A)(function*(){i.canDeactivate({fromLogout:!0})&&(i.authService.logout(),yield i.storage.remove("nombre"),yield i.storage.remove("correo"),i.router.navigate(["/home"]))})()}canDeactivate(i){var m;const v=this.router.getCurrentNavigation();return!(!(null==v||null===(m=v.extras.state)||void 0===m?void 0:m.fromEdit)&&(null==i?void 0:i.fromLogout))||confirm("\xbfEst\xe1s seguro que deseas cerrar sesi\xf3n?")}startScan(){var i=this;return(0,T.A)(function*(){try{if((yield F.checkPermission({force:!0})).granted){var m,v;null===(m=document.querySelector("body"))||void 0===m||m.classList.add("scanner-active");const O=yield F.startScan();if(null===(v=document.querySelector("body"))||void 0===v||v.classList.remove("scanner-active"),O.hasContent){console.log("Scanned content:",O.content);const Q=JSON.parse(O.content),{sessionId:J,subject:n,section:e}=Q;if(!J||!n||!e)return void i.presentAlert("Error","Datos incompletos","El QR escaneado no contiene todos los datos necesarios.");const t=i.authService.getUserEmail();if(!t)return void i.presentAlert("Error","Correo no encontrado","No se ha encontrado el correo electr\xf3nico del usuario.");const o={user:t,sessionId:J,subject:n,section:e,status:"presente",date:(new Date).toISOString()};i.sendData(o)}}else console.error("Permission denied")}catch(w){console.error("Error al escanear el c\xf3digo QR:",w),i.presentAlert("Error","Error en el escaneo","Hubo un problema al escanear el c\xf3digo QR.")}})()}sendData(i){var m=this;this.userDataService.sendUserData(i).subscribe(function(){var v=(0,T.A)(function*(w){console.log("Datos enviados correctamente",w),yield m.presentAlert("Asistencia","","confirmada")});return function(w){return v.apply(this,arguments)}}(),v=>{console.error("Error al enviar los datos",v)})}presentAlert(i,m,v){var w=this;return(0,T.A)(function*(){yield(yield w.alertController.create({header:i,subHeader:m,message:v,buttons:["OK"]})).present()})()}}return(c=C).\u0275fac=function(i){return new(i||c)(l.rXU(j.Ix),l.rXU(z.u),l.rXU(re.w),l.rXU(H),l.rXU(U.hG))},c.\u0275cmp=l.VBU({type:c,selectors:[["app-inicio"]],decls:11,vars:1,consts:[[1,"background-container"],["src","assets/Images/logo.png","alt","Logo",1,"logo"],[1,"welcome-message"],[1,"notas-section"],["color","primary","expand","block",1,"custom-button",3,"click"],["color","danger","expand","block",1,"custom-button",3,"click"]],template:function(i,m){1&i&&(l.j41(0,"ion-content")(1,"div",0),l.nrm(2,"img",1),l.j41(3,"div",2)(4,"p"),l.EFF(5),l.k0s()(),l.j41(6,"div",3)(7,"ion-button",4),l.bIt("click",function(){return m.startScan()}),l.EFF(8,"Marcar Asistencia"),l.k0s(),l.j41(9,"ion-button",5),l.bIt("click",function(){return m.logout()}),l.EFF(10,"Cerrar sesi\xf3n"),l.k0s()()()()),2&i&&(l.R7$(5),l.SpI("Bienvenido/a ",m.nombreUsuario,"!"))},dependencies:[U.Jm,U.W9],styles:[".background-container[_ngcontent-%COMP%]{width:100%;height:100vh;background-image:linear-gradient(to right,#002f6c,#0058a3);background-size:cover;background-position:center center;display:flex;flex-direction:column;justify-content:space-between;align-items:center;padding:30px;position:relative}.logo[_ngcontent-%COMP%]{width:300px;height:auto;margin-bottom:30px;animation:_ngcontent-%COMP%_bounce 2s infinite}.welcome-message[_ngcontent-%COMP%]{color:#fff;text-align:center;padding:20px;background:#000000b3;border-radius:15px;box-shadow:0 4px 10px #0000004d;font-family:Arial,sans-serif;font-size:1.5rem;font-weight:700;max-width:90%;max-height:250px;overflow:hidden;margin-bottom:20px}.button-section[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:column;justify-content:center;align-items:center;margin-top:20px;margin-bottom:20px}.custom-button[_ngcontent-%COMP%]{width:200px;margin-bottom:15px;color:#fff!important;font-size:1.2rem;font-weight:700;border-radius:20px;padding:12px;box-shadow:0 4px 6px #0000004d;transition:all .3s ease}.custom-button[_ngcontent-%COMP%]:hover{transform:scale(1.1)}@keyframes _ngcontent-%COMP%_bounce{0%,to{transform:translateY(0)}50%{transform:translateY(-10px)}}body.scanner-active[_ngcontent-%COMP%]{background:transparent!important}"]}),C})(),canDeactivate:[ne.M]}];let G=(()=>{var c;class C{}return(c=C).\u0275fac=function(i){return new(i||c)},c.\u0275mod=l.$C({type:c}),c.\u0275inj=l.G2t({imports:[j.iI.forChild(oe),j.iI]}),C})(),ie=(()=>{var c;class C{}return(c=C).\u0275fac=function(i){return new(i||c)},c.\u0275mod=l.$C({type:c}),c.\u0275inj=l.G2t({imports:[g.MD,K.YN,U.bv,G]}),C})()}}]);